"use strict";(self.webpackChunkshrtr_r=self.webpackChunkshrtr_r||[]).push([[241],{241:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(791),o=n(871),s="Main_Main__mR4MW";function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(853),i=n(531);function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}var p=n(881),m="Status_Status__c1paZ",v=n(184),y=function(e){var t=e.className,n=e.children;return(0,v.jsx)("h4",{className:m,children:(0,v.jsx)("span",{className:t,children:n})})},j=r.memo(y),x="Title_Title__CY4xP",g=function(e){var t=e.className,n=e.title,r=e.children;return(0,v.jsx)("div",{className:x,children:(0,v.jsxs)("span",{className:t,children:[(0,v.jsx)("h1",{children:n}),(0,v.jsx)("h3",{children:r})]})})},b=r.memo(g),_="Form_Form__DMpDX",k="TextInput_TextInput__knPHt",C=function(e){var t=e.className,n=e.name,r=e.value,o=e.changed,s=e.placeholder,u=e.required,c=e.focus;return(0,v.jsx)("span",{className:k,children:(0,v.jsx)("input",{type:"text",className:t,name:n,value:r,onChange:o,placeholder:s,required:u,autoFocus:c})})},N=r.memo(C),P=function(e,t){var n=e.className,r=e.name,o=e.value,s=e.changed,u=e.placeholder,c=e.required,i=e.focus;return(0,v.jsx)(N,{className:n,name:r,value:o,changed:s,placeholder:u,required:c,focus:i},t)},R=function(e){var t=e.inputs;return t instanceof Array?t.map(P):null},S=r.memo(R),w=function(e){var t=e.className,n=e.submited,r=e.children,o=e.textInputList,s=e.submitText,u=e.locked;return(0,v.jsx)("div",{className:_,children:(0,v.jsx)("span",{className:t,children:(0,v.jsxs)("form",{onSubmit:n,children:[r,(0,v.jsx)(S,{inputs:o}),(0,v.jsx)("input",{type:"submit",value:s,disabled:u})]})})})},T=r.memo(w),O=n(708),Z=function(e){var t=e.error,n=e.route;if(t)return(0,v.jsxs)("span",{children:["Error trying to generate link.",(0,v.jsx)("br",{}),t]});if(n){var r="".concat(O.Z.server,"/").concat(n);return(0,v.jsxs)("span",{children:["Generated at ",(0,v.jsx)("a",{href:r,children:r})]})}return null},I=function(){function e(t,n){var r=this;(0,c.Z)(this,e),this.generate=function(){return e.build(r.route,r.error)},this.error=n,this.route=t}return(0,i.Z)(e,null,[{key:"build",value:function(e,t){return(0,v.jsx)(Z,{error:t,route:e})}}]),e}(),L=new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),q=(0,i.Z)((function e(){(0,c.Z)(this,e)}));q.count=function(){var e=new Request("".concat(O.Z.server,"/@/count"),{method:"GET",headers:L});return E(e,10).then(M)},q.shorten=function(e,t){var n=new Request("".concat(O.Z.server,"/"),{method:"POST",body:JSON.stringify({link:e,shrt:t}),headers:L});return fetch(n).then(M).then((function(e){return e?Promise.resolve(F(e.shrt)):Promise.reject("Nothing returned")})).catch((function(e){return A(e).then((function(e){return Promise.resolve(F(null,e))}))}))};var E=function e(t,n,r){return fetch(t).catch((function(o){return 1===n?Promise.reject(o):D(r||5e3).then((function(){return e(t,n-1)}))}))},D=function(e){return new Promise((function(t){return setTimeout(t,e)}))},M=function(e){return e.ok?e.json():Promise.reject(e.json())},A=function(e){return(e instanceof Promise?e:Promise.resolve(e)).then((function(e){return Promise.resolve(e&&e.message?e.message:e)}))},F=function(e,t){return I.build(e,t)},W=q,H="Please enter a link to shorten",B="Waiting for server calculations...",G=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&a(e,t)}(n,e);var t=d(n);function n(){var e;(0,c.Z)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={link:"",shrt:"",response:H,loading:!1,countResponse:B},e.getStatus=function(){return e.state.loading?"Loading...":e.state.response},e.getTextInputList=function(){return[{name:"link",value:e.state.link,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Enter the long URL",required:!0,focus:!0},{name:"shrt",value:e.state.shrt,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Custom alias (optional)"}]},e.setLoading=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.setState({loading:t})},e.setCountResponse=function(t){return e.setState({countResponse:t})},e.setResponse=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return e.setState({response:t})},e.callCount=function(){return W.count().then((function(t){return e.setCountResponse("There are ".concat(t," shortened links!"))})).catch((function(t){return console.log(t)||e.setCountResponse("An error has occurred!")}))},e.handleInputChange=function(t){t.preventDefault();var n=t.target,r=n.name,o=n.type,s=n.checked,c=n.value;e.setState(u({},r,"checkbox"===o?s:c))},e.shorten=function(t){t.preventDefault();var n=e.state,r=n.link,o=n.shrt;r?(e.setLoading(),e.setCountResponse(B),W.shorten(r,o).then((function(t){e.setResponse(t),e.setLoading(!1),e.callCount()}))):e.setResponse()},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.callCount()}},{key:"render",value:function(){return(0,v.jsxs)(p.Z,{children:[(0,v.jsx)(b,{title:"Shrtr",children:"The independent shortener"}),(0,v.jsx)(j,{children:this.state.countResponse}),(0,v.jsx)(j,{children:this.getStatus()}),(0,v.jsx)(T,{submited:this.shorten,locked:this.state.loading,submitText:"Shorten \ud83d\udd17",textInputList:this.getTextInputList()})]})}}]),n}(r.PureComponent),J=G,U="Color_Color__bpX1j",X=function(){var e="#".concat((16777216*Math.random()|0).toString(16));document.documentElement.style.setProperty("--main-bg-color",e)},V=function(){return(0,v.jsxs)(v.Fragment,{children:[X(),(0,v.jsx)("input",{className:U,type:"button",value:"New Color \ud83c\udfa8",onClick:X})]})},Y=r.memo(V),z=n(654),K=function(){return"?error"===(0,o.TH)().search?(0,v.jsx)(o.Fg,{to:z.VJ}):(0,v.jsxs)("div",{className:s,children:[(0,v.jsx)(Y,{}),(0,v.jsx)(J,{})]})}},881:function(e,t,n){n.d(t,{Z:function(){return s}});n(791);var r="Wrapper_Wrapper__ov58U",o=n(184),s=function(e){var t=e.className,n=e.children;return(0,o.jsx)("div",{className:r,children:(0,o.jsx)("span",{className:t,children:n})})}}}]);
//# sourceMappingURL=241.4297058d.chunk.js.map