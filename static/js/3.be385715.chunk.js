(this["webpackJsonpshrtr.r"]=this["webpackJsonpshrtr.r"]||[]).push([[3],{32:function(e,t,n){"use strict";n(0);var r=n(33),o=n.n(r),c=n(2);t.a=function(e){var t=e.className,n=e.children;return Object(c.jsx)("div",{className:o.a.Wrapper,children:Object(c.jsx)("span",{className:t,children:n})})}},33:function(e,t,n){e.exports={Wrapper:"Wrapper_Wrapper__3zWuF"}},34:function(e,t,n){e.exports={Main:"Main_Main__1ji4S"}},35:function(e,t,n){e.exports={Status:"Status_Status__1G8jl"}},36:function(e,t,n){e.exports={Title:"Title_Title__2JDeu"}},37:function(e,t,n){e.exports={Form:"Form_Form__1lAKg"}},38:function(e,t,n){e.exports={TextInput:"TextInput_TextInput__1y4IE"}},39:function(e,t,n){e.exports={Color:"Color_Color__1jZjJ"}},40:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(1),s=n(34),u=n.n(s);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(14);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}var b=n(32),v=n(35),x=n.n(v),O=n(2),y=function(e){var t=e.className,n=e.children;return Object(O.jsx)("h4",{className:x.a.Status,children:Object(O.jsx)("span",{className:t,children:n})})},g=o.a.memo(y),_=n(36),S=n.n(_),N=function(e){var t=e.className,n=e.title,r=e.children;return Object(O.jsx)("div",{className:S.a.Title,children:Object(O.jsxs)("span",{className:t,children:[Object(O.jsx)("h1",{children:n}),Object(O.jsx)("h3",{children:r})]})})},C=o.a.memo(N),k=n(37),P=n.n(k),R=n(38),T=n.n(R),w=function(e){var t=e.className,n=e.name,r=e.value,o=e.changed,c=e.placeholder,s=e.required,u=e.focus;return Object(O.jsx)("span",{className:T.a.TextInput,children:Object(O.jsx)("input",{type:"text",className:t,name:n,value:r,onChange:o,placeholder:c,required:s,autoFocus:u})})},I=o.a.memo(w),L=function(e,t){var n=e.className,r=e.name,o=e.value,c=e.changed,s=e.placeholder,u=e.required,a=e.focus;return Object(O.jsx)(I,{className:n,name:r,value:o,changed:c,placeholder:s,required:u,focus:a},t)},q=function(e){var t=e.inputs;return t instanceof Array?t.map(L):null},E=o.a.memo(q),F=function(e){var t=e.className,n=e.submited,r=e.children,o=e.textInputList,c=e.submitText,s=e.locked;return Object(O.jsx)("div",{className:P.a.Form,children:Object(O.jsx)("span",{className:t,children:Object(O.jsxs)("form",{onSubmit:n,children:[r,Object(O.jsx)(E,{inputs:o}),Object(O.jsx)("input",{type:"submit",value:c,disabled:s})]})})})},A=o.a.memo(F),D=n(15),M=function(e){var t=e.error,n=e.route;if(t)return Object(O.jsxs)("span",{children:["Error trying to generate link.",Object(O.jsx)("br",{}),t]});if(n){var r="".concat(D.a.server,"/").concat(n);return Object(O.jsxs)("span",{children:["Generated at ",Object(O.jsx)("a",{href:r,children:r})]})}return null},W=function(){function e(t,n){var r=this;Object(i.a)(this,e),this.generate=function(){return e.build(r.route,r.error)},this.error=n,this.route=t}return f(e,null,[{key:"build",value:function(e,t){return Object(O.jsx)(M,{error:t,route:e})}}]),e}(),J=new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),G=function e(){Object(i.a)(this,e)};G.count=function(){var e=new Request("".concat(D.a.server,"/@/count"),{method:"GET",headers:J});return z(e,10).then(K)},G.shorten=function(e,t){var n=new Request("".concat(D.a.server,"/"),{method:"POST",body:JSON.stringify({link:e,shrt:t}),headers:J});return fetch(n).then(K).then((function(e){return e?Promise.resolve(Z(e.shrt)):Promise.reject("Nothing returned")})).catch((function(e){return U(e).then((function(e){return Promise.resolve(Z(null,e))}))}))};var z=function e(t,n,r){return fetch(t).catch((function(o){return 1===n?Promise.reject(o):H(r||5e3).then((function(){return e(t,n-1)}))}))},H=function(e){return new Promise((function(t){return setTimeout(t,e)}))},K=function(e){return e.ok?e.json():Promise.reject(e.json())},U=function(e){return(e instanceof Promise?e:Promise.resolve(e)).then((function(e){return Promise.resolve(e&&e.message?e.message:e)}))},Z=function(e,t){return W.build(e,t)},B=G,Q="Please enter a link to shorten",V="Waiting for server calculations...",X=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,e);var t=m(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={link:"",shrt:"",response:Q,loading:!1,countResponse:V},e.getStatus=function(){return e.state.loading?"Loading...":e.state.response},e.getTextInputList=function(){return[{name:"link",value:e.state.link,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Enter the long URL",required:!0,focus:!0},{name:"shrt",value:e.state.shrt,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Custom alias (optional)"}]},e.setLoading=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.setState({loading:t})},e.setCountResponse=function(t){return e.setState({countResponse:t})},e.setResponse=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;return e.setState({response:t})},e.callCount=function(){return B.count().then((function(t){return e.setCountResponse("There are ".concat(t," shortened links!"))})).catch((function(t){return console.log(t)||e.setCountResponse("An error has occurred!")}))},e.handleInputChange=function(t){t.preventDefault();var n=t.target,r=n.name,o=n.type,c=n.checked,s=n.value;e.setState(a({},r,"checkbox"===o?c:s))},e.shorten=function(t){t.preventDefault();var n=e.state,r=n.link,o=n.shrt;r?(e.setLoading(),e.setCountResponse(V),B.shorten(r,o).then((function(t){e.setResponse(t),e.setLoading(!1),e.callCount()}))):e.setResponse()},e}return f(n,[{key:"componentDidMount",value:function(){this.callCount()}},{key:"render",value:function(){return Object(O.jsxs)(b.a,{children:[Object(O.jsx)(C,{title:"Shrtr",children:"The independent shortener"}),Object(O.jsx)(g,{children:this.state.countResponse}),Object(O.jsx)(g,{children:this.getStatus()}),Object(O.jsx)(A,{submited:this.shorten,locked:this.state.loading,submitText:"Shorten \ud83d\udd17",textInputList:this.getTextInputList()})]})}}]),n}(r.PureComponent),Y=n(39),$=n.n(Y),ee=function(){var e="#".concat((16777216*Math.random()|0).toString(16));document.documentElement.style.setProperty("--main-bg-color",e)},te=function(){return Object(O.jsxs)(O.Fragment,{children:[ee(),Object(O.jsx)("input",{className:$.a.Color,type:"button",value:"New Color \ud83c\udfa8",onClick:ee})]})},ne=o.a.memo(te),re=n(8);t.default=function(){return"?error"===Object(c.g)().search?Object(O.jsx)(c.a,{to:re.b}):Object(O.jsxs)("div",{className:u.a.Main,children:[Object(O.jsx)(ne,{}),Object(O.jsx)(X,{})]})}}}]);
//# sourceMappingURL=3.be385715.chunk.js.map