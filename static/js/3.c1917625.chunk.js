(this["webpackJsonpshrtr.r"]=this["webpackJsonpshrtr.r"]||[]).push([[3],{31:function(e,t,n){"use strict";n(0);var r=n(32),o=n.n(r),s=n(3);t.a=function(e){var t=e.className,n=e.children;return Object(s.jsx)("div",{className:o.a.Wrapper,children:Object(s.jsx)("span",{className:t,children:n})})}},32:function(e,t,n){e.exports={Wrapper:"Wrapper_Wrapper__3zWuF"}},33:function(e,t,n){e.exports={Main:"Main_Main__1ji4S"}},34:function(e,t,n){e.exports={Status:"Status_Status__1G8jl"}},35:function(e,t,n){e.exports={Title:"Title_Title__2JDeu"}},36:function(e,t,n){e.exports={Form:"Form_Form__1lAKg"}},37:function(e,t,n){e.exports={TextInput:"TextInput_TextInput__1y4IE"}},38:function(e,t,n){e.exports={Color:"Color_Color__1jZjJ"}},39:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),s=n(33),c=n.n(s);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(14);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}var j=n(31),b=n(34),v=n.n(b),x=n(3),y=function(e){var t=e.className,n=e.children;return Object(x.jsx)("h4",{className:v.a.Status,children:Object(x.jsx)("span",{className:t,children:n})})},O=o.a.memo(y),g=n(35),_=n.n(g),S=function(e){var t=e.className,n=e.title,r=e.children;return Object(x.jsx)("div",{className:_.a.Title,children:Object(x.jsxs)("span",{className:t,children:[Object(x.jsx)("h1",{children:n}),Object(x.jsx)("h3",{children:r})]})})},N=o.a.memo(S),C=n(36),k=n.n(C),P=n(37),R=n.n(P),T=function(e){var t=e.className,n=e.name,r=e.value,o=e.changed,s=e.placeholder,c=e.required,u=e.focus;return Object(x.jsx)("span",{className:R.a.TextInput,children:Object(x.jsx)("input",{type:"text",className:t,name:n,value:r,onChange:o,placeholder:s,required:c,autoFocus:u})})},w=o.a.memo(T),I=function(e,t){var n=e.className,r=e.name,o=e.value,s=e.changed,c=e.placeholder,u=e.required,a=e.focus;return Object(x.jsx)(w,{className:n,name:r,value:o,changed:s,placeholder:c,required:u,focus:a},t)},L=function(e){var t=e.inputs;return t instanceof Array?t.map(I):null},q=o.a.memo(L),E=function(e){var t=e.className,n=e.submited,r=e.children,o=e.textInputList,s=e.submitText,c=e.locked;return Object(x.jsx)("div",{className:k.a.Form,children:Object(x.jsx)("span",{className:t,children:Object(x.jsxs)("form",{onSubmit:n,children:[r,Object(x.jsx)(q,{inputs:o}),Object(x.jsx)("input",{type:"submit",value:s,disabled:c})]})})})},F=o.a.memo(E),A=n(15),D=function(e){var t=e.error,n=e.route;return t?Object(x.jsxs)("span",{children:["Error trying to generate link.",Object(x.jsx)("br",{}),t]}):n?Object(x.jsxs)("span",{children:["Generated at ",Object(x.jsxs)("a",{href:"".concat("/shrtr","/").concat(n),children:["/",n]})]}):null},M=function(){function e(t,n){var r=this;Object(a.a)(this,e),this.generate=function(){return e.build(r.route,r.error)},this.error=n,this.route=t}return l(e,null,[{key:"build",value:function(e,t){return Object(x.jsx)(D,{error:t,route:e})}}]),e}(),W=new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),J=function e(){Object(a.a)(this,e)};J.count=function(){var e=new Request("".concat(A.a.server,"/@/count"),{method:"GET",headers:W});return G(e,10).then(H)},J.shorten=function(e,t){var n=new Request("".concat(A.a.server,"/"),{method:"POST",body:JSON.stringify({link:e,shrt:t}),headers:W});return fetch(n).then(H).then((function(e){return e?Promise.resolve(U(e.shrt)):Promise.reject("Nothing returned")})).catch((function(e){return K(e).then((function(e){return Promise.resolve(U(null,e))}))}))};var G=function e(t,n,r){return fetch(t).catch((function(o){return 1===n?Promise.reject(o):z(r||5e3).then((function(){return e(t,n-1)}))}))},z=function(e){return new Promise((function(t){return setTimeout(t,e)}))},H=function(e){return e.ok?e.json():Promise.reject(e.json())},K=function(e){return(e instanceof Promise?e:Promise.resolve(e)).then((function(e){return Promise.resolve(e&&e.message?e.message:e)}))},U=function(e,t){return M.build(e,t)},Z=J,B="Please enter a link to shorten",Q="Waiting for server calculations...",V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,e);var t=m(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={link:"",shrt:"",response:B,loading:!1,countResponse:Q},e.getStatus=function(){return e.state.loading?"Loading...":e.state.response},e.getTextInputList=function(){return[{name:"link",value:e.state.link,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Enter the long URL",required:!0,focus:!0},{name:"shrt",value:e.state.shrt,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Custom alias (optional)"}]},e.setLoading=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.setState({loading:t})},e.setCountResponse=function(t){return e.setState({countResponse:t})},e.setResponse=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return e.setState({response:t})},e.callCount=function(){return Z.count().then((function(t){return e.setCountResponse("There are ".concat(t," shortened links!"))})).catch((function(t){return console.log(t)||e.setCountResponse("An error has occurred!")}))},e.handleInputChange=function(t){t.preventDefault();var n=t.target,r=n.name,o=n.type,s=n.checked,c=n.value;e.setState(u({},r,"checkbox"===o?s:c))},e.shorten=function(t){t.preventDefault();var n=e.state,r=n.link,o=n.shrt;r?(e.setLoading(),e.setCountResponse(Q),Z.shorten(r,o).then((function(t){e.setResponse(t),e.setLoading(!1),e.callCount()}))):e.setResponse()},e}return l(n,[{key:"componentDidMount",value:function(){this.callCount()}},{key:"render",value:function(){return Object(x.jsxs)(j.a,{children:[Object(x.jsx)(N,{title:"Shrtr",children:"The independent shortener"}),Object(x.jsx)(O,{children:this.state.countResponse}),Object(x.jsx)(O,{children:this.getStatus()}),Object(x.jsx)(F,{submited:this.shorten,locked:this.state.loading,submitText:"Shorten \ud83d\udd17",textInputList:this.getTextInputList()})]})}}]),n}(r.PureComponent),X=n(38),Y=n.n(X),$=function(){var e="#".concat((16777216*Math.random()|0).toString(16));document.documentElement.style.setProperty("--main-bg-color",e)},ee=function(){return Object(x.jsxs)(r.Fragment,{children:[$(),Object(x.jsx)("input",{className:Y.a.Color,type:"button",value:"New Color \ud83c\udfa8",onClick:$})]})},te=o.a.memo(ee);t.default=function(){return Object(x.jsxs)("div",{className:c.a.Main,children:[Object(x.jsx)(te,{}),Object(x.jsx)(V,{})]})}}}]);
//# sourceMappingURL=3.c1917625.chunk.js.map