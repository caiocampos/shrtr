(this["webpackJsonpshrtr.r"]=this["webpackJsonpshrtr.r"]||[]).push([[3],{30:function(e,t,s){"use strict";var n=s(3),r=(s(0),s(31)),a=s.n(r);t.a=({className:e,children:t})=>Object(n.jsx)("div",{className:a.a.Wrapper,children:Object(n.jsx)("span",{className:e,children:t})})},31:function(e,t,s){e.exports={Wrapper:"Wrapper_Wrapper__3zWuF"}},32:function(e,t,s){e.exports={Main:"Main_Main__1ji4S"}},33:function(e,t,s){e.exports={Status:"Status_Status__1G8jl"}},34:function(e,t,s){e.exports={Title:"Title_Title__2JDeu"}},35:function(e,t,s){e.exports={Form:"Form_Form__1lAKg"}},36:function(e,t,s){e.exports={TextInput:"TextInput_TextInput__1y4IE"}},37:function(e,t,s){e.exports={Color:"Color_Color__1jZjJ"}},38:function(e,t,s){"use strict";s.r(t);var n=s(3),r=s(0),a=s.n(r),o=s(32),c=s.n(o),i=s(30),l=s(33),h=s.n(l);const u=({className:e,children:t})=>Object(n.jsx)("h4",{className:h.a.Status,children:Object(n.jsx)("span",{className:e,children:t})});var d=a.a.memo(u),p=s(34),m=s.n(p);const j=({className:e,title:t,children:s})=>Object(n.jsx)("div",{className:m.a.Title,children:Object(n.jsxs)("span",{className:e,children:[Object(n.jsx)("h1",{children:t}),Object(n.jsx)("h3",{children:s})]})});var x=a.a.memo(j),b=s(35),g=s.n(b),O=s(36),v=s.n(O);const f=({className:e,name:t,value:s,changed:r,placeholder:a,required:o,focus:c})=>Object(n.jsx)("span",{className:v.a.TextInput,children:Object(n.jsx)("input",{type:"text",className:e,name:t,value:s,onChange:r,placeholder:a,required:o,autoFocus:c})});var N=a.a.memo(f);const C=({className:e,name:t,value:s,changed:r,placeholder:a,required:o,focus:c},i)=>Object(n.jsx)(N,{className:e,name:t,value:s,changed:r,placeholder:a,required:o,focus:c},i),_=({inputs:e})=>e instanceof Array?e.map(C):null;var T=a.a.memo(_);const S=({className:e,submited:t,children:s,textInputList:r,submitText:a,locked:o})=>Object(n.jsx)("div",{className:g.a.Form,children:Object(n.jsx)("span",{className:e,children:Object(n.jsxs)("form",{onSubmit:t,children:[s,Object(n.jsx)(T,{inputs:r}),Object(n.jsx)("input",{type:"submit",value:a,disabled:o})]})})});var k=a.a.memo(S),P=s(14);const R=({error:e,route:t})=>e?Object(n.jsxs)("span",{children:["Error trying to generate link.",Object(n.jsx)("br",{}),e]}):t?Object(n.jsxs)("span",{children:["Generated at ",Object(n.jsxs)("a",{href:"".concat("/shrtr","/").concat(t),children:["/",t]})]}):null;class y{constructor(e,t){this.generate=()=>y.build(this.route,this.error),this.error=t,this.route=e}static build(e,t){return Object(n.jsx)(R,{error:t,route:e})}}const I=new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});class L{}L.count=()=>{const e=new Request("".concat(P.a.server,"/@/count"),{method:"GET",headers:I});return w(e,10).then(F)},L.shorten=(e,t)=>{const s=new Request("".concat(P.a.server,"/"),{method:"POST",body:JSON.stringify({link:e,shrt:t}),headers:I});return fetch(s).then(F).then((e=>e&&e.length?Promise.resolve(W(e[0].shrt)):Promise.reject("Nothing returned"))).catch((e=>M(e).then((e=>Promise.resolve(W(null,e))))))};const w=(e,t,s)=>fetch(e).catch((n=>1===t?Promise.reject(n):q(s||5e3).then((()=>w(e,t-1))))),q=e=>new Promise((t=>setTimeout(t,e))),F=e=>e.ok?e.json():Promise.reject(e.json()),M=e=>(e instanceof Promise?e:Promise.resolve(e)).then((e=>Promise.resolve(e&&e.message?e.message:e))),W=(e,t)=>y.build(e,t);var A=L;const E="Please enter a link to shorten",J="Waiting for server calculations...";class D extends r.PureComponent{constructor(...e){super(...e),this.state={link:"",shrt:"",response:E,loading:!1,countResponse:J},this.getStatus=()=>this.state.loading?"Loading...":this.state.response,this.getTextInputList=()=>[{name:"link",value:this.state.link,changed:this.handleInputChange,placeholder:"\ud83c\udf10 Enter the long URL",required:!0,focus:!0},{name:"shrt",value:this.state.shrt,changed:this.handleInputChange,placeholder:"\ud83c\udf10 Custom alias (optional)"}],this.setLoading=(e=!0)=>this.setState({loading:e}),this.setCountResponse=e=>this.setState({countResponse:e}),this.setResponse=(e=E)=>this.setState({response:e}),this.callCount=()=>A.count().then((e=>this.setCountResponse("There are ".concat(e," shortened links!")))).catch((e=>console.log(e)||this.setCountResponse("An error has occurred!"))),this.handleInputChange=e=>{e.preventDefault();const t=e.target,s=t.name,n=t.type,r=t.checked,a=t.value;this.setState({[s]:"checkbox"===n?r:a})},this.shorten=e=>{e.preventDefault();const t=this.state,s=t.link,n=t.shrt;s?(this.setLoading(),this.setCountResponse(J),A.shorten(s,n).then((e=>{this.setResponse(e),this.setLoading(!1),this.callCount()}))):this.setResponse()}}componentDidMount(){this.callCount()}render(){return Object(n.jsxs)(i.a,{children:[Object(n.jsx)(x,{title:"Shrtr",children:"The independent shortener"}),Object(n.jsx)(d,{children:this.state.countResponse}),Object(n.jsx)(d,{children:this.getStatus()}),Object(n.jsx)(k,{submited:this.shorten,locked:this.state.loading,submitText:"Shorten \ud83d\udd17",textInputList:this.getTextInputList()})]})}}var G=D,z=s(37),H=s.n(z);const K=()=>{const e="#".concat((16777216*Math.random()|0).toString(16));document.documentElement.style.setProperty("--main-bg-color",e)},U=()=>Object(n.jsxs)(r.Fragment,{children:[K(),Object(n.jsx)("input",{className:H.a.Color,type:"button",value:"New Color \ud83c\udfa8",onClick:K})]});var Z=a.a.memo(U);t.default=()=>Object(n.jsxs)("div",{className:c.a.Main,children:[Object(n.jsx)(Z,{}),Object(n.jsx)(G,{})]})}}]);
//# sourceMappingURL=3.f250d88d.chunk.js.map