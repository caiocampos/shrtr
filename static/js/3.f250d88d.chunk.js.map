{"version":3,"sources":["components/Wrapper/index.js","components/Wrapper/Wrapper.module.scss","components/Main/Main.module.scss","components/Status/Status.module.scss","components/Title/Title.module.scss","components/Form/Form.module.scss","components/TextInput/TextInput.module.scss","components/Color/Color.module.scss","components/Status/index.js","components/Title/index.js","components/TextInput/index.js","components/Form/TextInputList.js","components/Form/index.js","components/ShortenResponse/index.js","services/shrtr.service.js","containers/Shrtr/index.js","components/Color/index.js","components/Main/index.js"],"names":["Wrapper","className","children","classes","module","exports","Status","React","memo","Title","title","TextInput","name","value","changed","placeholder","required","focus","type","onChange","autoFocus","renderInput","i","TextInputList","inputs","Array","map","Form","submited","textInputList","submitText","locked","onSubmit","disabled","ShortenResponse","error","route","href","process","ShortenResponseObject","constructor","generate","build","this","headers","Headers","ShrtrService","count","request","Request","Constants","server","method","fetch_retry","then","parseResponse","shorten","link","shrt","body","JSON","stringify","fetch","data","length","Promise","resolve","unwrapShortenResponse","reject","catch","promiseError","err","n","delay","wait","setTimeout","res","ok","json","e","message","defaultMessage","waitingCalculations","Shrtr","PureComponent","state","response","loading","countResponse","getStatus","getTextInputList","handleInputChange","setLoading","setState","setCountResponse","setResponse","callCount","Service","console","log","event","preventDefault","target","checked","componentDidMount","render","newColor","randomColor","Math","random","toString","document","documentElement","style","setProperty","Color","onClick","Main"],"mappings":"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","file":"static/js/3.f250d88d.chunk.js","sourcesContent":["import React from 'react';\nimport classes from './Wrapper.module.scss';\n\nconst Wrapper = ({ className, children }) => (\n\t<div className={classes.Wrapper}>\n\t\t<span className={className}>{children}</span>\n\t</div>\n);\n\nexport default Wrapper;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"Wrapper_Wrapper__3zWuF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main\":\"Main_Main__1ji4S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Status\":\"Status_Status__1G8jl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Title\":\"Title_Title__2JDeu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Form\":\"Form_Form__1lAKg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextInput\":\"TextInput_TextInput__1y4IE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Color\":\"Color_Color__1jZjJ\"};","import React from 'react';\nimport classes from './Status.module.scss';\n\nconst Status = ({ className, children }) => (\n\t<h4 className={classes.Status}>\n\t\t<span className={className}>{children}</span>\n\t</h4>\n);\n\nexport default React.memo(Status);\n","import React from 'react';\nimport classes from './Title.module.scss';\n\nconst Title = ({ className, title, children }) => (\n\t<div className={classes.Title}>\n\t\t<span className={className}>\n\t\t\t<h1>{title}</h1>\n\t\t\t<h3>{children}</h3>\n\t\t</span>\n\t</div>\n);\n\nexport default React.memo(Title);\n","import React from 'react';\nimport classes from './TextInput.module.scss';\n\nconst TextInput = ({ className, name, value, changed, placeholder, required, focus }) => (\n\t<span className={classes.TextInput}>\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tclassName={className}\n\t\t\tname={name}\n\t\t\tvalue={value}\n\t\t\tonChange={changed}\n\t\t\tplaceholder={placeholder}\n\t\t\trequired={required}\n\t\t\tautoFocus={focus}\n\t\t/>\n\t</span>\n);\n\nexport default React.memo(TextInput);\n","import React from 'react';\r\nimport TextInput from '../TextInput';\r\n\r\nconst renderInput = ({ className, name, value, changed, placeholder, required, focus }, i) => (\r\n\t<TextInput\r\n\t\tkey={i}\r\n\t\tclassName={className}\r\n\t\tname={name}\r\n\t\tvalue={value}\r\n\t\tchanged={changed}\r\n\t\tplaceholder={placeholder}\r\n\t\trequired={required}\r\n\t\tfocus={focus}\r\n\t/>\r\n);\r\n\r\nconst TextInputList = ({ inputs }) => (!(inputs instanceof Array) ? null : inputs.map(renderInput));\r\n\r\nexport default React.memo(TextInputList);\r\n","import React from 'react';\nimport classes from './Form.module.scss';\nimport TextInputList from './TextInputList';\n\nconst Form = ({ className, submited, children, textInputList, submitText, locked }) => (\n\t<div className={classes.Form}>\n\t\t<span className={className}>\n\t\t\t<form onSubmit={submited}>\n\t\t\t\t{children}\n\t\t\t\t<TextInputList inputs={textInputList} />\n\t\t\t\t<input type=\"submit\" value={submitText} disabled={locked} />\n\t\t\t</form>\n\t\t</span>\n\t</div>\n);\n\nexport default React.memo(Form);\n","import React from 'react';\n\nconst ShortenResponse = ({ error, route }) => {\n\tif (error) {\n\t\treturn (\n\t\t\t<span>\n\t\t\t\tError trying to generate link.\n\t\t\t\t<br />\n\t\t\t\t{error}\n\t\t\t</span>\n\t\t);\n\t}\n\tif (route) {\n\t\treturn (\n\t\t\t<span>\n\t\t\t\tGenerated at <a href={`${process.env.PUBLIC_URL}/${route}`}>/{route}</a>\n\t\t\t</span>\n\t\t);\n\t}\n\treturn null;\n};\n\nexport class ShortenResponseObject {\n\tconstructor(route, error) {\n\t\tthis.error = error;\n\t\tthis.route = route;\n\t}\n\n\tgenerate = () => ShortenResponseObject.build(this.route, this.error);\n\n\tstatic build(route, error) {\n\t\treturn <ShortenResponse error={error} route={route} />;\n\t}\n}\n\nexport default ShortenResponse;\n","import Constants from '../constants';\nimport { ShortenResponseObject } from '../components/ShortenResponse';\n\nconst emptyErr = 'Nothing returned';\n\nconst headers = new Headers({\n\t'Content-Type': 'application/json',\n\t'Access-Control-Allow-Origin': '*'\n});\n\nclass ShrtrService {\n\tstatic count = () => {\n\t\tconst request = new Request(`${Constants.server}/@/count`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: headers\n\t\t});\n\t\treturn fetch_retry(request, 10).then(parseResponse);\n\t};\n\n\tstatic shorten = (link, shrt) => {\n\t\tconst request = new Request(`${Constants.server}/`, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tlink: link,\n\t\t\t\tshrt: shrt\n\t\t\t}),\n\t\t\theaders: headers\n\t\t});\n\t\treturn fetch(request)\n\t\t\t.then(parseResponse)\n\t\t\t.then(\n\t\t\t\t(data) =>\n\t\t\t\t\t!data || !data.length\n\t\t\t\t\t\t? Promise.reject(emptyErr)\n\t\t\t\t\t\t: Promise.resolve(unwrapShortenResponse(data[0].shrt))\n\t\t\t)\n\t\t\t.catch((error) => promiseError(error).then((err) => Promise.resolve(unwrapShortenResponse(null, err))));\n\t};\n}\n\nconst fetch_retry = (request, n, delay) =>\n\tfetch(request).catch(\n\t\t(error) => (n === 1 ? Promise.reject(error) : wait(delay || 5000).then(() => fetch_retry(request, n - 1)))\n\t);\n\nexport const wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay));\n\nexport const parseResponse = (res) => (!res.ok ? Promise.reject(res.json()) : res.json());\n\nexport const promiseError = (error) => {\n\tconst promise = error instanceof Promise ? error : Promise.resolve(error);\n\treturn promise.then((e) => Promise.resolve(e && e.message ? e.message : e));\n};\n\nexport const unwrapShortenResponse = (route, error) => ShortenResponseObject.build(route, error);\n\nexport default ShrtrService;\n","import React, { PureComponent } from 'react';\nimport Wrapper from '../../components/Wrapper';\nimport Status from '../../components/Status';\nimport Title from '../../components/Title';\nimport Form from '../../components/Form';\nimport Service from '../../services/shrtr.service';\n\nconst defaultMessage = 'Please enter a link to shorten';\nconst waitingCalculations = 'Waiting for server calculations...';\n\nclass Shrtr extends PureComponent {\n\tstate = {\n\t\tlink: '',\n\t\tshrt: '',\n\t\tresponse: defaultMessage,\n\t\tloading: false,\n\t\tcountResponse: waitingCalculations\n\t};\n\n\tgetStatus = () => (this.state.loading ? 'Loading...' : this.state.response);\n\n\tgetTextInputList = () => [\n\t\t{\n\t\t\tname: 'link',\n\t\t\tvalue: this.state.link,\n\t\t\tchanged: this.handleInputChange,\n\t\t\tplaceholder: '🌐 Enter the long URL',\n\t\t\trequired: true,\n\t\t\tfocus: true\n\t\t},\n\t\t{\n\t\t\tname: 'shrt',\n\t\t\tvalue: this.state.shrt,\n\t\t\tchanged: this.handleInputChange,\n\t\t\tplaceholder: '🌐 Custom alias (optional)'\n\t\t}\n\t];\n\n\tsetLoading = (loading = true) => this.setState({ loading });\n\n\tsetCountResponse = (countResponse) => this.setState({ countResponse });\n\n\tsetResponse = (response = defaultMessage) => this.setState({ response });\n\n\tcallCount = () =>\n\t\tService.count()\n\t\t\t.then((count) => this.setCountResponse(`There are ${count} shortened links!`))\n\t\t\t.catch((error) => console.log(error) || this.setCountResponse('An error has occurred!'));\n\n\thandleInputChange = (event) => {\n\t\tevent.preventDefault();\n\t\tconst { name, type, checked, value } = event.target;\n\t\tthis.setState({\n\t\t\t[name]: type === 'checkbox' ? checked : value\n\t\t});\n\t};\n\n\tshorten = (event) => {\n\t\tevent.preventDefault();\n\t\tconst { link, shrt } = this.state;\n\t\tif (!link) {\n\t\t\tthis.setResponse();\n\t\t\treturn;\n\t\t}\n\t\tthis.setLoading();\n\t\tthis.setCountResponse(waitingCalculations);\n\t\tService.shorten(link, shrt).then((res) => {\n\t\t\tthis.setResponse(res);\n\t\t\tthis.setLoading(false);\n\t\t\tthis.callCount();\n\t\t});\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.callCount();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Wrapper>\n\t\t\t\t<Title title=\"Shrtr\">The independent shortener</Title>\n\t\t\t\t<Status>{this.state.countResponse}</Status>\n\t\t\t\t<Status>{this.getStatus()}</Status>\n\t\t\t\t<Form\n\t\t\t\t\tsubmited={this.shorten}\n\t\t\t\t\tlocked={this.state.loading}\n\t\t\t\t\tsubmitText=\"Shorten 🔗\"\n\t\t\t\t\ttextInputList={this.getTextInputList()}\n\t\t\t\t/>\n\t\t\t</Wrapper>\n\t\t);\n\t}\n}\n\nexport default Shrtr;\n","import React, { Fragment } from 'react';\nimport classes from './Color.module.scss';\n\nconst maxColorNum = 1 << 24;\n\nconst newColor = () => {\n\tconst randomColor = `#${((maxColorNum * Math.random()) | 0).toString(16)}`;\n\tdocument.documentElement.style.setProperty('--main-bg-color', randomColor);\n};\n\nconst Color = () => (\n\t<Fragment>\n\t\t{newColor()}\n\t\t<input className={classes.Color} type=\"button\" value=\"New Color 🎨\" onClick={newColor} />\n\t</Fragment>\n);\n\nexport default React.memo(Color);\n","import React from 'react';\nimport classes from './Main.module.scss';\nimport Shrtr from '../../containers/Shrtr';\nimport Color from '../Color';\n\nconst Main = () => (\n\t<div className={classes.Main}>\n\t\t<Color />\n\t\t<Shrtr />\n\t</div>\n);\n\nexport default Main;\n"],"sourceRoot":""}