"use strict";(self.webpackChunkshrtr_r=self.webpackChunkshrtr_r||[]).push([[466],{466:(e,t,s)=>{s.r(t),s.d(t,{default:()=>H});var n=s(43),r=s(216);const o="Main_Main__mR4MW";var a=s(94);const i="Status_Status__c1paZ";var l=s(579);const h=e=>{let{className:t,children:s}=e;return(0,l.jsx)("h4",{className:i,children:(0,l.jsx)("span",{className:t,children:s})})},c=n.memo(h),u="Title_Title__CY4xP",d=e=>{let{className:t,title:s,children:n}=e;return(0,l.jsx)("div",{className:u,children:(0,l.jsxs)("span",{className:t,children:[(0,l.jsx)("h1",{children:s}),(0,l.jsx)("h3",{children:n})]})})},m=n.memo(d),p="Form_Form__DMpDX",x="TextInput_TextInput__knPHt",j=e=>{let{className:t,name:s,value:n,changed:r,placeholder:o,required:a,focus:i}=e;return(0,l.jsx)("span",{className:x,children:(0,l.jsx)("input",{type:"text",className:t,name:s,value:n,onChange:r,placeholder:o,required:a,autoFocus:i})})},g=n.memo(j),v=(e,t)=>{let{className:s,name:n,value:r,changed:o,placeholder:a,required:i,focus:h}=e;return(0,l.jsx)(g,{className:s,name:n,value:r,changed:o,placeholder:a,required:i,focus:h},t)},C=e=>{let{inputs:t}=e;return t instanceof Array?t.map(v):null},_=n.memo(C),N=e=>{let{className:t,submited:s,children:n,textInputList:r,submitText:o,locked:a}=e;return(0,l.jsx)("div",{className:p,children:(0,l.jsx)("span",{className:t,children:(0,l.jsxs)("form",{onSubmit:s,children:[n,(0,l.jsx)(_,{inputs:r}),(0,l.jsx)("input",{type:"submit",value:o,disabled:a})]})})})},f=n.memo(N);var k=s(217);const b=e=>{let{error:t,route:s}=e;if(t)return(0,l.jsxs)("span",{children:["Error trying to generate link.",(0,l.jsx)("br",{}),t]});if(s){const e=`${k.A.server}/${s}`;return(0,l.jsxs)("span",{children:["Generated at ",(0,l.jsx)("a",{href:e,children:e})]})}return null};class P{constructor(e,t){this.generate=()=>P.build(this.route,this.error),this.error=t,this.route=e}static build(e,t){return(0,l.jsx)(b,{error:t,route:e})}}const R=new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});class S{}S.count=()=>{const e=new Request(`${k.A.server}/@/count`,{method:"GET",headers:R});return T(e,10).then(A)},S.shorten=(e,t)=>{const s=new Request(`${k.A.server}/`,{method:"POST",body:JSON.stringify({link:e,shrt:t}),headers:R});return fetch(s).then(A).then((e=>e?Promise.resolve(L(e.shrt)):Promise.reject("Nothing returned"))).catch((e=>I(e).then((e=>Promise.resolve(L(null,e))))))};const T=(e,t,s)=>fetch(e).catch((n=>1===t?Promise.reject(n):y(s||5e3).then((()=>T(e,t-1))))),y=e=>new Promise((t=>setTimeout(t,e))),A=e=>e.ok?e.json():Promise.reject(e.json()),I=e=>(e instanceof Promise?e:Promise.resolve(e)).then((e=>Promise.resolve(e&&e.message?e.message:e))),L=(e,t)=>P.build(e,t),w=S,q="Please enter a link to shorten",M="Waiting for server calculations...";class $ extends n.PureComponent{constructor(){var e;super(...arguments),e=this,this.state={link:"",shrt:"",response:q,loading:!1,countResponse:M},this.getStatus=()=>this.state.loading?"Loading...":this.state.response,this.getTextInputList=()=>[{name:"link",value:this.state.link,changed:this.handleInputChange,placeholder:"\ud83c\udf10 Enter the long URL",required:!0,focus:!0},{name:"shrt",value:this.state.shrt,changed:this.handleInputChange,placeholder:"\ud83c\udf10 Custom alias (optional)"}],this.setLoading=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.setState({loading:t})},this.setCountResponse=e=>this.setState({countResponse:e}),this.setResponse=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return e.setState({response:t})},this.callCount=()=>w.count().then((e=>this.setCountResponse(`There are ${e} shortened links!`))).catch((e=>console.error(e)||this.setCountResponse("An error has occurred!"))),this.handleInputChange=e=>{e.preventDefault();const{name:t,type:s,checked:n,value:r}=e.target;this.setState({[t]:"checkbox"===s?n:r})},this.shorten=e=>{e.preventDefault();const{link:t,shrt:s}=this.state;t?(this.setLoading(),this.setCountResponse(M),w.shorten(t,s).then((e=>{this.setResponse(e),this.setLoading(!1),this.callCount()}))):this.setResponse()}}componentDidMount(){this.callCount()}render(){return(0,l.jsxs)(a.A,{children:[(0,l.jsx)(m,{title:"Shrtr",children:"The independent shortener"}),(0,l.jsx)(c,{children:this.state.countResponse}),(0,l.jsx)(c,{children:this.getStatus()}),(0,l.jsx)(f,{submited:this.shorten,locked:this.state.loading,submitText:"Shorten \ud83d\udd17",textInputList:this.getTextInputList()})]})}}const D=$,E="Color_Color__bpX1j",F=()=>{const e=`#${(16777216*Math.random()|0).toString(16)}`;document.documentElement.style.setProperty("--main-bg-color",e)},W=()=>(0,l.jsxs)(l.Fragment,{children:[F(),(0,l.jsx)("input",{className:E,type:"button",value:"New Color \ud83c\udfa8",onClick:F})]}),O=n.memo(W);var G=s(974);const H=()=>"?error"===(0,r.zy)().search?(0,l.jsx)(r.C5,{to:G.ud}):(0,l.jsxs)("div",{className:o,children:[(0,l.jsx)(O,{}),(0,l.jsx)(D,{})]})},94:(e,t,s)=>{s.d(t,{A:()=>o});s(43);const n="Wrapper_Wrapper__ov58U";var r=s(579);const o=e=>{let{className:t,children:s}=e;return(0,r.jsx)("div",{className:n,children:(0,r.jsx)("span",{className:t,children:s})})}}}]);
//# sourceMappingURL=466.93c78cbf.chunk.js.map