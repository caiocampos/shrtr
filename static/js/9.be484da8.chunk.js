"use strict";(self.webpackChunkshrtr_r=self.webpackChunkshrtr_r||[]).push([[9],{9:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Y});var r=t(43),s=t(216);const o="Main_Main__mR4MW";function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=t(721),u=t(841),i=t(689),l=t(612),h=t(94);const d="Status_Status__c1paZ";var m=t(579),f=function(e){var n=e.className,t=e.children;return(0,m.jsx)("h4",{className:d,children:(0,m.jsx)("span",{className:n,children:t})})};const p=r.memo(f),v="Title_Title__CY4xP";var x=function(e){var n=e.className,t=e.title,r=e.children;return(0,m.jsx)("div",{className:v,children:(0,m.jsxs)("span",{className:n,children:[(0,m.jsx)("h1",{children:t}),(0,m.jsx)("h3",{children:r})]})})};const g=r.memo(x),j="Form_Form__DMpDX",C="TextInput_TextInput__knPHt";var _=function(e){var n=e.className,t=e.name,r=e.value,s=e.changed,o=e.placeholder,a=e.required,c=e.focus;return(0,m.jsx)("span",{className:C,children:(0,m.jsx)("input",{type:"text",className:n,name:t,value:r,onChange:s,placeholder:o,required:a,autoFocus:c})})};const b=r.memo(_);var k=function(e,n){var t=e.className,r=e.name,s=e.value,o=e.changed,a=e.placeholder,c=e.required,u=e.focus;return(0,m.jsx)(b,{className:t,name:r,value:s,changed:o,placeholder:a,required:c,focus:u},n)},N=function(e){var n=e.inputs;return n instanceof Array?n.map(k):null};const y=r.memo(N);var A=function(e){var n=e.className,t=e.submited,r=e.children,s=e.textInputList,o=e.submitText,a=e.locked;return(0,m.jsx)("div",{className:j,children:(0,m.jsx)("span",{className:n,children:(0,m.jsxs)("form",{onSubmit:t,children:[r,(0,m.jsx)(y,{inputs:s}),(0,m.jsx)("input",{type:"submit",value:o,disabled:a})]})})})};const P=r.memo(A);var R=t(217),S=function(e){var n=e.error,t=e.route;if(n)return(0,m.jsxs)("span",{children:["Error trying to generate link.",(0,m.jsx)("br",{}),n]});if(t){var r="".concat(R.A.server,"/").concat(t);return(0,m.jsxs)("span",{children:["Generated at ",(0,m.jsx)("a",{href:r,children:r})]})}return null},T=function(){function e(n,t){var r=this;(0,c.A)(this,e),this.generate=function(){return e.build(r.route,r.error)},this.error=t,this.route=n}return(0,u.A)(e,null,[{key:"build",value:function(e,n){return(0,m.jsx)(S,{error:n,route:e})}}]),e}();var w=new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),I=(0,u.A)((function e(){(0,c.A)(this,e)}));I.count=function(){var e=new Request("".concat(R.A.server,"/@/count"),{method:"GET",headers:w});return L(e,10).then(M)},I.shorten=function(e,n){var t=new Request("".concat(R.A.server,"/"),{method:"POST",body:JSON.stringify({link:e,shrt:n}),headers:w});return fetch(t).then(M).then((function(e){return e?Promise.resolve(E(e.shrt)):Promise.reject("Nothing returned")})).catch((function(e){return D(e).then((function(e){return Promise.resolve(E(null,e))}))}))};var L=function e(n,t,r){return fetch(n).catch((function(s){return 1===t?Promise.reject(s):q(r||5e3).then((function(){return e(n,t-1)}))}))},q=function(e){return new Promise((function(n){return setTimeout(n,e)}))},M=function(e){return e.ok?e.json():Promise.reject(e.json())},D=function(e){return(e instanceof Promise?e:Promise.resolve(e)).then((function(e){return Promise.resolve(e&&e.message?e.message:e)}))},E=function(e,n){return T.build(e,n)};const F=I;var O="Please enter a link to shorten",W="Waiting for server calculations...";const G=function(e){(0,i.A)(t,e);var n=(0,l.A)(t);function t(){var e;(0,c.A)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=n.call.apply(n,[this].concat(s))).state={link:"",shrt:"",response:O,loading:!1,countResponse:W},e.getStatus=function(){return e.state.loading?"Loading...":e.state.response},e.getTextInputList=function(){return[{name:"link",value:e.state.link,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Enter the long URL",required:!0,focus:!0},{name:"shrt",value:e.state.shrt,changed:e.handleInputChange,placeholder:"\ud83c\udf10 Custom alias (optional)"}]},e.setLoading=function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.setState({loading:n})},e.setCountResponse=function(n){return e.setState({countResponse:n})},e.setResponse=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return e.setState({response:n})},e.callCount=function(){return F.count().then((function(n){return e.setCountResponse("There are ".concat(n," shortened links!"))})).catch((function(n){return console.log(n)||e.setCountResponse("An error has occurred!")}))},e.handleInputChange=function(n){n.preventDefault();var t=n.target,r=t.name,s=t.type,o=t.checked,c=t.value;e.setState(a({},r,"checkbox"===s?o:c))},e.shorten=function(n){n.preventDefault();var t=e.state,r=t.link,s=t.shrt;r?(e.setLoading(),e.setCountResponse(W),F.shorten(r,s).then((function(n){e.setResponse(n),e.setLoading(!1),e.callCount()}))):e.setResponse()},e}return(0,u.A)(t,[{key:"componentDidMount",value:function(){this.callCount()}},{key:"render",value:function(){return(0,m.jsxs)(h.A,{children:[(0,m.jsx)(g,{title:"Shrtr",children:"The independent shortener"}),(0,m.jsx)(p,{children:this.state.countResponse}),(0,m.jsx)(p,{children:this.getStatus()}),(0,m.jsx)(P,{submited:this.shorten,locked:this.state.loading,submitText:"Shorten \ud83d\udd17",textInputList:this.getTextInputList()})]})}}]),t}(r.PureComponent),H="Color_Color__bpX1j";var U=function(){var e="#".concat((16777216*Math.random()|0).toString(16));document.documentElement.style.setProperty("--main-bg-color",e)},X=function(){return(0,m.jsxs)(m.Fragment,{children:[U(),(0,m.jsx)("input",{className:H,type:"button",value:"New Color \ud83c\udfa8",onClick:U})]})};const z=r.memo(X);var J=t(974);const Y=function(){return"?error"===(0,s.zy)().search?(0,m.jsx)(s.C5,{to:J.ud}):(0,m.jsxs)("div",{className:o,children:[(0,m.jsx)(z,{}),(0,m.jsx)(G,{})]})}},94:(e,n,t)=>{t.d(n,{A:()=>o});t(43);const r="Wrapper_Wrapper__ov58U";var s=t(579);const o=function(e){var n=e.className,t=e.children;return(0,s.jsx)("div",{className:r,children:(0,s.jsx)("span",{className:n,children:t})})}}}]);
//# sourceMappingURL=9.be484da8.chunk.js.map